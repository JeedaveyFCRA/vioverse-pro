<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCRA Litigation Command Center - Attorney Dashboard</title>
    <style>
        :root {
            --primary: #2c3e50;
            --danger: #e74c3c;
            --warning: #f39c12;
            --success: #27ae60;
            --info: #3498db;
            --dark: #1a1a1a;
            --light: #ecf0f1;
            --extreme: #8B0000;
            --severe: #FF4500;
            --serious: #FF8C00;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #bdc3c7;
            font-size: 14px;
        }

        .case-info {
            display: flex;
            gap: 30px;
            margin-top: 15px;
            font-size: 14px;
        }

        .case-info span {
            padding: 5px 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        /* Dashboard Grid */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 20px;
            color: #2c3e50;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
        }

        .card-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            color: white;
        }

        .badge-extreme { background: var(--extreme); }
        .badge-severe { background: var(--severe); }
        .badge-serious { background: var(--serious); }
        .badge-success { background: var(--success); }
        .badge-info { background: var(--info); }

        /* Violation Summary */
        .violation-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .violation-stat {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .violation-count {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .violation-label {
            font-size: 12px;
            text-transform: uppercase;
            color: #7f8c8d;
        }

        .extreme { color: var(--extreme); }
        .severe { color: var(--severe); }
        .serious { color: var(--serious); }

        /* Creditor Table */
        .creditor-table {
            width: 100%;
            margin-top: 15px;
        }

        .creditor-table thead {
            background: #34495e;
            color: white;
        }

        .creditor-table th,
        .creditor-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .creditor-table tbody tr:hover {
            background: #f5f5f5;
        }

        .creditor-name {
            font-weight: 600;
        }

        /* Damages Calculator */
        .damages-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px;
        }

        .damages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .damage-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .damage-amount {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .damage-label {
            font-size: 12px;
            opacity: 0.9;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline-item {
            display: flex;
            margin-bottom: 20px;
        }

        .timeline-date {
            min-width: 120px;
            font-weight: bold;
            color: var(--info);
        }

        .timeline-content {
            padding-left: 20px;
            border-left: 2px solid #e0e0e0;
        }

        .timeline-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .timeline-desc {
            color: #7f8c8d;
            font-size: 14px;
        }

        /* Actions */
        .actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--info);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Quick Stats */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }

        /* Evidence Links */
        .evidence-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .evidence-item {
            padding: 8px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 3px solid var(--info);
            font-size: 14px;
        }

        .evidence-item:hover {
            background: #e9ecef;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #7f8c8d;
        }

        /* Full Width Cards */
        .card.full-width {
            grid-column: 1 / -1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }

            .violation-grid {
                grid-template-columns: 1fr;
            }

            .case-info {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <h1>‚öñÔ∏è FCRA Litigation Command Center</h1>
        <div class="subtitle">Complete Evidence & Violation Analysis System</div>
        <div class="case-info">
            <span>üìÅ Case #1812245</span>
            <span>üìÖ Discharge: Feb 9, 2024</span>
            <span>‚ö†Ô∏è Violations: <strong id="totalViolations">412</strong></span>
            <span>üìÑ Evidence Docs: <strong id="totalEvidence">187</strong></span>
            <span>üí∞ Est. Damages: <strong id="estimatedDamages">$2-12M</strong></span>
        </div>
    </header>

    <!-- Quick Stats Bar -->
    <div class="quick-stats">
        <div class="stat-card">
            <div class="stat-value" style="color: var(--extreme)">145</div>
            <div class="stat-label">EXTREME</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: var(--severe)">200</div>
            <div class="stat-label">SEVERE</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: var(--serious)">26</div>
            <div class="stat-label">SERIOUS</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: var(--danger)">41</div>
            <div class="stat-label">PUBLIC RECORDS</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: white">13</div>
            <div class="stat-label">CREDITORS</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: #f1c40f">562</div>
            <div class="stat-label">DAYS (ALLY)</div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div class="dashboard">
        <!-- Violation Summary Card -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">üìä Violation Analysis</h2>
                <span class="card-badge badge-extreme">CRITICAL</span>
            </div>
            <div class="violation-grid">
                <div class="violation-stat">
                    <div class="violation-count extreme">145</div>
                    <div class="violation-label">Extreme</div>
                </div>
                <div class="violation-stat">
                    <div class="violation-count severe">200</div>
                    <div class="violation-label">Severe</div>
                </div>
                <div class="violation-stat">
                    <div class="violation-count serious">26</div>
                    <div class="violation-label">Serious</div>
                </div>
            </div>
            <div class="actions">
                <button class="btn btn-primary" onclick="viewViolations()">View All Violations</button>
                <button class="btn btn-danger" onclick="exportViolations()">Export CSV</button>
            </div>
        </div>

        <!-- Top Violators Card -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">üè¶ Top Violators</h2>
                <span class="card-badge badge-info">13 Creditors</span>
            </div>
            <table class="creditor-table">
                <thead>
                    <tr>
                        <th>Creditor</th>
                        <th>Violations</th>
                        <th>Days</th>
                        <th>Liability</th>
                    </tr>
                </thead>
                <tbody id="creditorTableBody">
                    <tr>
                        <td class="creditor-name">Ally Financial</td>
                        <td><span style="color: var(--danger)">81</span></td>
                        <td>562</td>
                        <td><strong>$2-3M</strong></td>
                    </tr>
                    <tr>
                        <td class="creditor-name">JPMCB</td>
                        <td><span style="color: var(--warning)">61</span></td>
                        <td>471</td>
                        <td><strong>$1.5-2M</strong></td>
                    </tr>
                    <tr>
                        <td class="creditor-name">Cornerstone FCU</td>
                        <td><span style="color: var(--warning)">47</span></td>
                        <td>516</td>
                        <td><strong>$1.2-1.8M</strong></td>
                    </tr>
                    <tr>
                        <td class="creditor-name">Barclays</td>
                        <td>44</td>
                        <td>418</td>
                        <td><strong>$1-1.5M</strong></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Key Evidence Card -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">üî• Smoking Gun Evidence</h2>
                <span class="card-badge badge-success">24 Denials</span>
            </div>
            <div class="evidence-list" id="smokingGunList">
                <div class="evidence-item">
                    üìÑ Capital One Denial - Apr 15, 2024 (Post-Discharge)
                </div>
                <div class="evidence-item">
                    üìÑ Best Egg Denial - Apr 23, 2024 (73 days post)
                </div>
                <div class="evidence-item">
                    üìÑ Rocket Mortgage Denial - Apr 21, 2024
                </div>
                <div class="evidence-item">
                    ‚ö†Ô∏è Jan 17 Alert - 10 Creditor Attack Revealed
                </div>
            </div>
            <div class="actions">
                <button class="btn btn-primary" onclick="viewEvidence()">View All Evidence</button>
            </div>
        </div>

        <!-- Critical Timeline Card (Full Width) -->
        <div class="card full-width">
            <div class="card-header">
                <h2 class="card-title">üìÖ Critical Timeline</h2>
                <span class="card-badge badge-info">8 Key Dates</span>
            </div>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">Aug 22, 2023</div>
                    <div class="timeline-content">
                        <div class="timeline-title">Plan Complete - DS2830 Warning</div>
                        <div class="timeline-desc">141-day countdown begins</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Dec 20, 2023</div>
                    <div class="timeline-content">
                        <div class="timeline-title">Premeditated Attacks Begin</div>
                        <div class="timeline-desc">JPMorgan starts 21 days before closure</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Jan 10, 2024</div>
                    <div class="timeline-content">
                        <div class="timeline-title">Case CLOSED - Discharge WITHHELD</div>
                        <div class="timeline-desc">Vulnerability window opens - NO PROTECTION</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Jan 17, 2024</div>
                    <div class="timeline-content">
                        <div class="timeline-title">üö® ALERT RECEIVED</div>
                        <div class="timeline-desc">10 notifications at 9:41 AM revealing phased attack</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Feb 9, 2024</div>
                    <div class="timeline-content">
                        <div class="timeline-title">‚úÖ DISCHARGE GRANTED</div>
                        <div class="timeline-desc">Protection restored - violations continue anyway</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Damages Calculator (Full Width) -->
        <div class="damages-section">
            <h2 style="margin-bottom: 10px;">üí∞ Damages Calculation</h2>
            <div class="damages-grid">
                <div class="damage-item">
                    <div class="damage-amount">$412,000</div>
                    <div class="damage-label">STATUTORY MINIMUM</div>
                </div>
                <div class="damage-item">
                    <div class="damage-amount">$8-12M</div>
                    <div class="damage-label">REALISTIC RANGE</div>
                </div>
                <div class="damage-item">
                    <div class="damage-amount">$2-3M</div>
                    <div class="damage-label">ALLY ALONE</div>
                </div>
                <div class="damage-item">
                    <div class="damage-amount">$100M+</div>
                    <div class="damage-label">CLASS ACTION</div>
                </div>
            </div>
            <div class="actions">
                <button class="btn btn-success" onclick="generateReport()">Generate Full Report</button>
                <button class="btn btn-primary" onclick="exportLitigation()">Export Litigation Package</button>
            </div>
        </div>
    </div>

    <!-- Load Bridge System -->
    <script src="js/violation-evidence-bridge.js"></script>
    <script src="js/evidence-vector-system.js"></script>

    <script>
        // Initialize dashboard
        let bridge = null;
        let vectorSystem = null;

        async function initializeDashboard() {
            console.log('Initializing Attorney Dashboard...');

            // Initialize bridge system
            bridge = new ViolationEvidenceBridge();
            await bridge.initialize();

            // Update statistics
            updateStatistics();

            // Load creditor table
            loadCreditorTable();

            // Load evidence
            loadSmokingGuns();

            console.log('‚úÖ Dashboard ready');
        }

        function updateStatistics() {
            if (!bridge) return;

            const stats = bridge.getStatistics();

            // Update header stats
            document.getElementById('totalViolations').textContent = stats.totalViolations;
            document.getElementById('totalEvidence').textContent = stats.evidenceDocuments;

            // Update violation counts
            document.querySelector('.extreme').textContent = stats.bySeverity.Extreme || 0;
            document.querySelector('.severe').textContent = stats.bySeverity.Severe || 0;
            document.querySelector('.serious').textContent = stats.bySeverity.Serious || 0;
        }

        function loadCreditorTable() {
            if (!bridge) return;

            const stats = bridge.getStatistics();
            const tbody = document.getElementById('creditorTableBody');

            // Sort creditors by violation count
            const creditorList = Object.entries(stats.byCreditor)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10); // Top 10

            tbody.innerHTML = creditorList.map(([creditor, count]) => {
                // Calculate estimated liability
                const minLiability = count * 1000; // Statutory minimum
                const maxLiability = count * 25000; // Willful maximum

                return `
                    <tr>
                        <td class="creditor-name">${creditor}</td>
                        <td><span style="color: ${count > 50 ? 'var(--danger)' : count > 20 ? 'var(--warning)' : ''}">${count}</span></td>
                        <td>${calculateViolationDays(creditor)}</td>
                        <td><strong>$${formatMoney(minLiability)}-${formatMoney(maxLiability)}</strong></td>
                    </tr>
                `;
            }).join('');
        }

        function calculateViolationDays(creditor) {
            // Map creditors to known violation durations
            const durations = {
                'Ally Financial': 562,
                'Cornerstone FCU': 516,
                'JPMCB': 471,
                'Mariner Finance': 430,
                'Barclays': 418,
                'THD/CBNA': 398,
                'Bank of America': 192,
                'Best Buy': 192,
                'Sears/CBNA': 192,
                'Citizens Bank': 192,
                'Discover Bank': 192,
                'Discover Loans': 192
            };
            return durations[creditor] || 'N/A';
        }

        function formatMoney(amount) {
            if (amount >= 1000000) {
                return (amount / 1000000).toFixed(1) + 'M';
            } else if (amount >= 1000) {
                return (amount / 1000).toFixed(0) + 'K';
            }
            return amount.toString();
        }

        function loadSmokingGuns() {
            // This would load actual smoking gun evidence
            // For now using sample data
            const evidenceList = document.getElementById('smokingGunList');
            // Already populated with sample data
        }

        // Action handlers
        function viewViolations() {
            window.open('index-pro.html', '_blank');
        }

        function viewEvidence() {
            window.open('evidence-view.html', '_blank');
        }

        function exportViolations() {
            if (!bridge) return;

            const violations = [
                ...bridge.violations.tradelines,
                ...bridge.violations.publicRecords
            ];

            // Convert to CSV
            const csv = convertToCSV(violations);
            downloadFile(csv, 'fcra-violations-export.csv', 'text/csv');
        }

        function generateReport() {
            if (!bridge) return;

            const stats = bridge.getStatistics();

            const report = `
FCRA LITIGATION REPORT
Generated: ${new Date().toISOString()}

VIOLATION SUMMARY
================
Total Violations: ${stats.totalViolations}
- Extreme: ${stats.bySeverity.Extreme}
- Severe: ${stats.bySeverity.Severe}
- Serious: ${stats.bySeverity.Serious}

CREDITOR LIABILITY
==================
${Object.entries(stats.byCreditor)
    .sort((a, b) => b[1] - a[1])
    .map(([creditor, count]) => `${creditor}: ${count} violations`)
    .join('\n')}

KEY DATES
=========
Discharge Date: February 9, 2024
Vulnerability Window: January 10 - February 9, 2024
Alert Received: January 17, 2024

DAMAGES CALCULATION
===================
Statutory Minimum: $${stats.totalViolations * 1000}
Realistic Range: $8-12 Million
Ally Financial Alone: $2-3 Million

EVIDENCE DOCUMENTS
==================
Total Documents: ${stats.evidenceDocuments}
Linked to Violations: ${stats.linkedEvidence}
            `;

            downloadFile(report, 'fcra-litigation-report.txt', 'text/plain');
        }

        function exportLitigation() {
            // Generate comprehensive litigation package
            alert('Generating complete litigation package... This will include:\n\n‚Ä¢ All violations (CSV)\n‚Ä¢ Evidence manifest (JSON)\n‚Ä¢ Timeline documentation\n‚Ä¢ Damages calculations\n‚Ä¢ Creditor liability analysis');

            // In production, this would create a ZIP file with all documents
            generateReport();
        }

        function convertToCSV(data) {
            if (!data.length) return '';

            const headers = Object.keys(data[0]);
            const rows = data.map(obj =>
                headers.map(header => {
                    const value = obj[header];
                    return typeof value === 'string' && value.includes(',')
                        ? `"${value}"`
                        : value;
                }).join(',')
            );

            return [headers.join(','), ...rows].join('\n');
        }

        function downloadFile(content, filename, type) {
            const blob = new Blob([content], { type });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', initializeDashboard);

        // Auto-refresh stats every 30 seconds
        setInterval(updateStatistics, 30000);
    </script>
</body>
</html>